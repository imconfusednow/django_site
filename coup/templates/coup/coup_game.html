{% extends "coup/base.html" %}
{% load static %}
{% block content %}    
    <script src="https://cdn.socket.io/4.4.0/socket.io.min.js" integrity="sha384-1fOn6VtTq3PWwfsOrk45LnYcGosJwzMHv+Xh/Jx5303FVOXzEnw0EpLv30mtjmlj" crossorigin="anonymous"></script>
    <script src="{% static 'coup/coup_game.js' %}"></script>
    <input hidden value="{{player_id}}" id="player_id">   
    <div class="title">
        <h1 class="title-text" id="coup-title">Coup Online - <span class="room_name" id="room_name">{{ room_name }}</span></h1>
    </div>
    <div class="grid-container">
        <div class="grid-item"></div>
        <div class="grid-item" style="transform: rotate(180deg);">
            <div class="player-info" id="opponent1-info">
                <span style="" id="opponent1-name">???</span>
                <span style="" id="opponent1-money"></span>
            </div>
            <div class="opponent-card-div hidden">
                <img src="{% static 'coup/card_back.png' %}" class="opponent-card opponent1-card">
            </div>
            <div class="opponent-card-div hidden">
                <img src="{% static 'coup/card_back.png' %}" class="opponent-card opponent1-card">
            </div>
        </div>
        <div class="grid-item"></div>
        <div class="grid-item" style="transform: rotate(90deg)">
            <div class="player-info" id="opponent0-info">
                <span style="" id="opponent0-name">???</span>
                <span style="" id="opponent0-money"></span>
            </div>
            <div class="opponent-card-div hidden">
                <img src="{% static 'coup/card_back.png' %}" class="opponent-card opponent0-card">
            </div>
            <div class="opponent-card-div hidden">
                <img src="{% static 'coup/card_back.png' %}" class="opponent-card opponent0-card">
            </div>
        </div>
        <div class="grid-item center-grid" id="center-grid">
            <div id="player-setup">
                <input required class="form-control" type="text" id="nick" placeholder="Enter Nick" value="">
                <script>
                    var player_id = document.getElementById("player_id").value;
                    document.getElementById("nick").value = "{{ player_name }}"
                </script>
                <button class='btn btn-primary' id="join-button" onclick="joinGame()">Join</button>
            </div>   
        </div>
        <div class="grid-item" style="transform: rotate(270deg)">
            <div class="player-info" id="opponent2-info">
                <span style="" id="opponent2-name">???</span>
                <span style="" id="opponent2-money"></span>
            </div>
            <div class="opponent-card-div hidden">
                <img src="{% static 'coup/card_back.png' %}" class="opponent-card opponent2-card">
            </div>
            <div class="opponent-card-div hidden">
                <img src="{% static 'coup/card_back.png' %}" class="opponent-card opponent2-card">
            </div>
        </div>
        <div class="grid-item "></div>
        <div class="grid-item grid-item-player" id="player-ready" style="display:none">                     
            <div class="player-info" id="player-info">
                <span style="" id="player-name"></span>
                <span style="" id="player-money">Coins: 0</span>
            </div>
            <div class="turn-options hidden">
                <button class="option-button option-button-true" id="take-1" style="float: right;">Take 1 Coin</button>
                <button class="option-button option-button-true" id="foreign-aid" style="float: right;">Foreign Aid (Take 2 Coins)</button>
            </div>
            <div class="player-card-div-1 player-card-div hidden">
                <img src="{% static 'coup/assassin.png' %}" class="player-card-1 player-card hidden" id="player-card-1">
            </div>
            <div class="player-card-div-2 player-card-div hidden">
                <img src="{% static 'coup/duke.png' %}" class="player-card-2 player-card hidden" id="player-card-2">
            </div>
            <div class="turn-options hidden">
                <button class="option-button option-button-lie" id="assassinate">Assassinate - Assassin</button>
                <button class="option-button option-button-lie" id="take-3">Take 3 Coins - Duke</button>
                <button class="option-button option-button-true" id="steal">Steal 2 Coins - Captain</button>
                <button class="option-button option-button-lie" id="swap">Swap Cards - Ambassador</button>
            </div>
            <div class="coup-action turn-options hidden">
                <button class="option-button button-inactive" id="coup-action">Coup</button>
            </div>
        </div>
        <div class="grid-item "></div>
    </div>
    {% if player_in_started_game %}
        <script defer>sendRejoin()</script>
    {% endif %}
{% endblock content %}